# OSI 7계층
네트워크를 통해 서로 다른 두 호스트가 통신하는 과정은 매우 복잡하다. 
과정을 단계별로 모듈화하여서 복잡한 시스템을 이해하기 쉽고 개발자는 해당 계층의 모듈만 이해해도 개발하기 쉽게 되었다.
물리, 데이터 링크, 네트워크, 전송, 세션, 표현, 응용 계층으로 7단계로 구분하였고 송신은 응 -> 물 순서로, 수신은 반대로 물 -> 응 순서로 이루어진다.

# TCP/IP 4계층
OSI 7계층은 이론적으로는 좋으나 현실적으로는 너무 세분화되어 있어서 힘들다.
TCP/IP 4계층은 실무적으로 더 간소화된 모델로 네트워크 통신의 효율성을 높인다.

응용, 표현 계층을 묶어서 응용 계층

세션, 전송 계층을 묶어서 전송 계층

네트워크, 데이터 링크를 묶어서 인터넷 계층

물리 계층은 네트워크 인터페이스 계층으로 총 4개의 단계로 표현하고

전송 계층과 인터넷 계층에서 가장 많이 사용하는 TCP와 IP 프로토콜을 이용하여 TCP/IP 4계층이라고 한다.

# 네트워크 용어
- 호스트 (host) -> 데이터를 주고 받을 수 있는 장비. ex. 컴퓨터, 스마트폰
- 네트워크 장비 -> 호스트 간 데이터를 중개해주는 장치

## 1. 물리 계층
- 실질(물리)적으로 데이터가 오가는 계층이다.
- 데이터를 **비트(0과 1)**로 변환
- 광섬유, 무선을 통해서 수신 호스트로 데이터를 전송한다.
- 네트워크 장비
  - 리피터(repeater) -> 단순히 약해진 신호를 증폭해줌 

## 2. 데이터 링크 계층
- 물리 계층의 간단한 데이터 오류 체크
- 프레임단위로 데이터를 전송하며 MAC 주소를 통해서 호스트를 구분
- 네트워크 장비
  - 허브 (hub) 
    - 한 호스트가 메시지를 보내면 포트에 연결되어 있는 모든 호스트에서 메시지를 전달하고 해당 호스트가 아닌 호스트는 메시지를 무시
    - 반이중 통신 (half-duplex)으로 동시에 양쪽에서 메시지를 보낼 수 없다.
  - 스위치 (switch)
    - 스위칭 테이블을 통해서 호스트와 MAC주소의 매핑값을 가지고 있어서 특정 호스트에서 메시지를 전달해줄 수 있음
    - 스위치 플러딩(Flooding)을 통해서 MAC주소를 모르는 호스트의 MAC주소를 알 수 있음
- ARP (Address Resolution Protocol)
  - IP주소는 아는데 MAC주소는 모를 때 사용하는 프로토콜

## 3. 네트워크 계층
- IP주소를 통해 호스트를 구분한다.
- 패킷단위로 데이터를 주고받는다.
- 네트워크 장비
  - 라우터 (Router)
    - 경로 설정(Routing)을 제공
    - 라우팅 테이블을 통해서 다음 홉 (hop)으로 메시지를 보냄
      
## 4. 전송 계층
- 네트워크까지는 호스트를 구분할 수 있음
- 그러나 한 컴퓨터 안에는 여러 프로그램이 실행되고 있음
- 이를 포트(port)를 통해서 구분할 수 있고 전송 계층은 포트를 이용해 서로 다른 애플리케이션 간 통신을 관리한다.
- TCP (Transmission Communication Protocol)
  - 연결 지향적 프로토콜
  - 세그먼트(Segment)단위로 통신하며 오류, 흐름, 혼잡 제어, 연결 수립을 통한 신뢰성 있는 데이터 전송 가능
- UDP (User Datagram Protocol)
  - 비연결형 프로토콜
  - Datagram 단위로 통신하며 오류로 인한 재전송을 하지 않아 데이터를 빠르게 전송 가능
  - 데이터의 오류가 큰 문제 없는 실시간 스트리밍이나 DNS 통신에서 사용

## 5. 세션 계층
- SSL와 같은 인터페이스 관리 

## 6. 표현 계층
- 데이터 형변환, 암호화, 데이터 압축같은 데이터 처리 과정

## 7. 응용 계층
- 사용자의 이벤트 처리
- HTTP, FTP, DNS와 같은 프로토콜이 존재

# 캡슐화
- 각 단계는 단계에 맞는 데이터 단위 PDU (Protocol Data Unit)이 존재
- 이전 단계에서 전달받은 데이터에 각 단계에 필요한 내용을 추가한 헤더(header)를 붙여서 만듦
- 데이터 (페이로드)에 헤더를 붙이는 과정을 캡슐화 (Encapsulation)이라고 하고
- 수신지에서는 반대로 헤더를 읽고 제거한 후 페이로드만 상위 계층으로 넘기는데 이 과정을 비캡슐화 (Decapsulation)라고 한다.
